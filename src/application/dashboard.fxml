<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.Text?>

<VBox xmlns="http://javafx.com/javafx"
      xmlns:fx="http://javafx.com/fxml"
      fx:controller="application.dashboardController"
      stylesheets="@dashboardCss.css"
      styleClass="modern-dashboard-container">

    <!-- Header avec bouton de personnalisation -->
    <HBox styleClass="dashboard-header" alignment="CENTER_RIGHT" spacing="20">
        <padding>
            <Insets top="15" right="25" bottom="10" left="25"/>
        </padding>
        
        <!-- Informations du service (à gauche) -->
        <VBox alignment="CENTER_LEFT" spacing="2">
            <Text text="📊 Dashboard Moderne" styleClass="dashboard-title"/>
            <Label fx:id="serviceInfoLabel" styleClass="service-info" text="Service: Admin | 0 tables"/>
        </VBox>
        
        <!-- Spacer pour pousser le bouton à droite -->
        <Region HBox.hgrow="ALWAYS"/>
        
        <!-- Bouton de personnalisation -->
        <Button onAction="#showCustomizeDialog" 
                styleClass="customize-button" 
                text="⚙️ Personnaliser"/>
        
        <!-- Bouton d'actualisation -->
        <Button onAction="#refreshDashboard" 
                styleClass="refresh-button" 
                text="🔄 Actualiser"/>
    </HBox>

    <!-- Barre de statistiques principales -->
    <FlowPane styleClass="stats-container" hgap="20" vgap="15" alignment="CENTER">
        <padding>
            <Insets top="20" right="25" bottom="20" left="25"/>
        </padding>
        
        <!-- Personnel Total -->
        <VBox styleClass="stat-card stat-primary" alignment="CENTER" spacing="8">
            <Label fx:id="personnelTotalLabel" styleClass="stat-label" text="Personnel Total"/>
            <Label fx:id="personnelTotalCount" styleClass="stat-value stat-primary-value" text="0"/>
            <Text text="👥" styleClass="stat-icon"/>
        </VBox>

        <!-- Personnel Officiers -->
        <VBox styleClass="stat-card stat-success" alignment="CENTER" spacing="8">
            <Label fx:id="personnelOfficiersLabel" styleClass="stat-label" text="Personnel Officiers"/>
            <Label fx:id="personnelOfficiersCount" styleClass="stat-value stat-success-value" text="0"/>
            <Text text="🎖️" styleClass="stat-icon"/>
        </VBox>

        <!-- Personnel Féminin -->
        <VBox styleClass="stat-card stat-info" alignment="CENTER" spacing="8">
            <Label fx:id="personnelFemininLabel" styleClass="stat-label" text="Personnel Féminin"/>
            <Label fx:id="personnelFemininCount" styleClass="stat-value stat-info-value" text="0"/>
            <Text text="👩‍✈️" styleClass="stat-icon"/>
        </VBox>

        <!-- Formations -->
        <VBox styleClass="stat-card stat-warning" alignment="CENTER" spacing="8">
            <Label fx:id="formationsLabel" styleClass="stat-label" text="Formations"/>
            <Label fx:id="formationsCount" styleClass="stat-value stat-warning-value" text="0"/>
            <Text text="🎓" styleClass="stat-icon"/>
        </VBox>
    </FlowPane>

    <!-- Séparateur -->
    <Separator styleClass="dashboard-separator"/>

    <!-- Titre de la section graphiques -->
    <HBox alignment="CENTER_LEFT" spacing="20" styleClass="section-header">
        <padding>
            <Insets top="15" right="25" bottom="10" left="25"/>
        </padding>
        
        <Text text="📈 Graphiques du Dashboard" styleClass="section-title"/>
        
        <Region HBox.hgrow="ALWAYS"/>
        
        <Label fx:id="chartsCount" 
               styleClass="charts-counter"
               text="0 graphique(s) affiché(s)"/>
    </HBox>

    <!-- Conteneur principal des graphiques avec scroll -->
    <ScrollPane fitToWidth="true" VBox.vgrow="ALWAYS" styleClass="charts-scroll-pane">
        <padding>
            <Insets top="5" right="0" bottom="20" left="0"/>
        </padding>
        
        <!-- Conteneur des graphiques -->
        <FlowPane fx:id="chartsContainer" 
                  styleClass="modern-charts-container" 
                  alignment="TOP_CENTER"
                  hgap="25" 
                  vgap="25"
                  prefWrapLength="999999">
            <padding>
                <Insets top="15" right="25" bottom="15" left="25"/>
            </padding>
            
            <!-- Message d'état vide (masqué par défaut) -->
            <VBox fx:id="emptyStateMessage" 
                  alignment="CENTER" 
                  spacing="20" 
                  styleClass="empty-state-container"
                  visible="false" 
                  managed="false">
                
                <Text text="📊" styleClass="empty-state-icon"/>
                
                <VBox alignment="CENTER" spacing="8">
                    <Text text="Aucun graphique à afficher" 
                          styleClass="empty-state-title"/>
                    <Text text="Cliquez sur 'Personnaliser' pour ajouter des graphiques personnalisés" 
                          styleClass="empty-state-subtitle"/>
                </VBox>
                
                <Button onAction="#showCustomizeDialog" 
                        styleClass="empty-state-button" 
                        text="➕ Ajouter des graphiques"/>
            </VBox>
        </FlowPane>
    </ScrollPane>

    <!-- Footer avec informations -->
    <HBox alignment="CENTER" spacing="30" styleClass="dashboard-footer">
        <padding>
            <Insets top="15" right="25" bottom="15" left="25"/>
        </padding>
        
        <!-- Dernière mise à jour -->
        <HBox alignment="CENTER_LEFT" spacing="8">
            <Text text="🔄" styleClass="footer-icon"/>
            <Text text="Dernière actualisation:" styleClass="footer-label"/>
            <Label fx:id="lastUpdateTime" 
                   text="Maintenant" 
                   styleClass="footer-value"/>
        </HBox>
        
        <Region HBox.hgrow="ALWAYS"/>
        
        <!-- Indicateur de statut -->
        <HBox alignment="CENTER_RIGHT" spacing="8">
            <Text text="📡" styleClass="footer-icon"/>
            <Text text="Statut:" styleClass="footer-label"/>
            <Label text="En ligne" styleClass="status-online"/>
        </HBox>
    </HBox>

</VBox>